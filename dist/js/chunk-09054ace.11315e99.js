(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09054ace"],{"31e4":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-wrapper"},[a("div",{staticClass:"login-card"},[a("span",{staticClass:"header"},[t._v("เข้าสู่ระบบ")]),a("button",{staticClass:"facebook-button",on:{click:t.loginFacebook}},[a("img",{attrs:{src:i("5307"),alt:"facebook"}}),t._v("Login with Facebook\n        ")]),a("button",{staticClass:"google-button",on:{click:t.loginGoogle}},[a("img",{attrs:{src:i("cebc"),alt:"google"}}),t._v("Login with Google\n        ")])])])},r=[],n=(i("8e6e"),i("ac6a"),i("456d"),i("a481"),i("bd86")),o=i("59ca"),s=i.n(o),c=i("883d"),A={login:function(t){return c["b"].api.post("/authentications",t).then((function(t){return t.data}))}},u=i("2f62");function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var m={computed:g({},Object(u["b"])({user:function(t){return t.user.data}})),mounted:function(){this.$store.commit("user/resetUserData"),this.$store.commit("user/resetToken")},methods:{loginGoogle:function(){var t=this;this.$store.commit("user/resetUserData"),this.$store.commit("user/resetToken"),this.$store.commit("loading/start");var e=new s.a.auth.GoogleAuthProvider;s.a.auth().signInWithPopup(e).then((function(e){var i=e.additionalUserInfo.profile,a={fname:i.given_name,lname:i.family_name,email:i.email,fb_uid:null,gg_uid:i.id,profile_image:i.picture,gender:"",birthdate:"",height:0,weight:0,migraine_type:0,migraine_age:0};t.$store.commit("user/setUserData",a),A.login({type:"gg",token:e.credential.accessToken}).then((function(e){t.finishLoggedin(e)}))})).catch((function(e){t.$store.commit("loading/end"),t.loginError=e}))},loginFacebook:function(){var t=this;this.loginError=null,this.$store.commit("user/resetUserData"),this.$store.commit("user/resetToken"),this.$store.commit("loading/start");var e=new s.a.auth.FacebookAuthProvider;s.a.auth().signInWithPopup(e).then((function(e){var i=e.additionalUserInfo.profile,a={fname:i.first_name,lname:i.last_name,email:i.email,profile_image:i.picture.data.url,fb_uid:i.id,gg_uid:null,gender:"",birthdate:"",height:0,weight:0,migraine_type:0,migraine_age:0};t.$store.commit("user/setUserData",a),A.login({type:"fb",token:e.credential.accessToken}).then((function(e){t.finishLoggedin(e)}))})).catch((function(e){t.$store.commit("loading/end"),t.loginError=e}))},finishLoggedin:function(t){if(Array.isArray(t)&&alert("คุณไม่มีสิทธิ์ หรือ ยังไม่ได้ลงทะเบียนเป็นผู้เชียวชาญ"),t["data"]["data"]["group_id"]<1e3)alert("คุณไม่มีสิทธิ์ หรือ ยังไม่ได้ลงทะเบียนเป็นผู้เชียวชาญ");else{var e=g({},t.data.data,{profile_image:t.data.data.profile_image?t.data.data.profile_image:this.user.profile_image});delete e.token;var i=t.data.data.token;this.$store.commit("user/setUserData",e),this.$store.commit("user/setToken",i),this.$store.commit("loading/end");var a=this.$route.query.redirectUrl?this.$route.query.redirectUrl:"/chats";this.$router.replace(a)}}}},h=m,d=(i("bb3d"),i("2877")),f=Object(d["a"])(h,a,r,!1,null,"7463ce8a",null);e["default"]=f.exports},5307:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADJSURBVHgB7VTtEYIwDE08B+gI3UBHcARXcANH0AmQDdzEbsAIOgIbxPSAXq98XCjNP95dgJaXPEKSAhFVpIcK/RUUcQBlHGEbWjbX3z0s25nNBAbl48VmUkXe+8Sk3AzeiHiXEHNr8BQzaT2+ib9la+bIJbroCl1hJ1FCwCy9VJ8D6SQ7tltwQvwNz32rxlk08VrcpnHQZN8PWZsIBhT9RRx8VGxpBoadL8OCv9pFQS10R4THaUp16xw8lsjqXbQL7AJlBGrQQ/0HTYN3VLvrNPsAAAAASUVORK5CYII="},"9e15":function(t,e,i){},bb3d:function(t,e,i){"use strict";var a=i("9e15"),r=i.n(a);r.a},cebc:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANSSURBVHgBzZZdSFRBFMfPzOxq7faxUWpfD1sPBhK1tEphBWuGBkWIWbQlKT0E1UsYIWSyGoTQBwTVg0QkhG4fhhGKmLmtFGh+ZdGD+aIGpWGSmpvh3TunuXfVdL/a1S36Pezce87M+c/OnDtzAP4xJJROPRaTQc80RxFJMiGwVZiYOpjAsGg+Isd6mburVzk7e/8UK6jgN0uSyc3wCgJJhRAmhwgVnEsFwYQDBhlMSSoECjac/DfhQJAUxThaikMSfJ+QEBWzclEZIWiFeUAI3xfzvL3G267xNsSu1tnF2mTCPEDAy7F+xHwEB3cn2kRiZAaKIn5FEKyTCHRRAm4iQzylJFnYc2aKxTW05UMAppe032IyMqbtCSDWKHOWu8rZ3OvP3W/ZJsbKj8Rka+IcLUUQhGnB8dLlZa66tTl8JGq2FsLtOEfrCYgQquB4LRg1Wm2PIuaqMoK7Xzfl745taN0AEYSqqkybrr4snYDFOd2wcOeAZzYc90OEUZOGMUwDnFxd0SzYMQB0ycQ7fd6XD4EGpl4ay4YwkCWp2lm0bNiTpQjrfWayaag6WACRsvcgDIgmOks0jz1LSojBpwOQTxBBCOeLlZYG6sA5yPAXoJPBua8D4yGCEMokpVX3UJwaTWJPZu3jC2mNGaAvWIz7QXyHvQ0yutUtUlPz5zPtaUbh5pTzumsjPBgX+khS2qyVTgiD1JKxPcih1tu+SKNf8jSffFeXNForlQtpHJB1cHJku0dMnQ5eM5eatRAGKONxHxtAhyKmPHuyNAWG26UVDadGk6FTWj6z7xZqMN6CENlV4rKJlD/oR/DG1PP0WZr0MMOEnLWBvwuXYKOb89xO65NePzpgupth0E/stUV/tZ7xI9ZLkFkcFxb2zRJUMNuzCsXFexECIFa9nCO+Em2X8s4ZNVJON4uwueLVEDWcDguGjngNoucc53VXf8fwwmw/UCGKoznf9nRiNej7zwJxr1DC1zsK9Gmz/N4DxhnNFfdaFcwRHvUZXGtKQI7ufst1ukPe/oBFVKI9q0jsnQ3mxh3m/pH3Ort2NGRBBZM9w6ghVFRf5BiEhlN8u8XBvt2QCmFVGDXpyHi6KAHXibpl+rCnCG+QkCaOpLnDWvkS/jd+ATiiKgr25RJ2AAAAAElFTkSuQmCC"}}]);